{% extends 'projects/base.html' %}
{% load static %}

{% block title %}{{ title }} | Kossivi ETSE{% endblock %}

{% block content %}
<section class="bg-gray-50">
  <div class="mx-auto max-w-6xl px-4 py-14">

    <!-- Header -->
    <div class="flex flex-col gap-2 sm:flex-row sm:items-end sm:justify-between">
      <div>
        <h1 class="text-3xl font-extrabold tracking-tight text-slate-900">{{ title }}</h1>
        {% if subtitle %}
          <p class="mt-2 text-sm text-slate-700">{{ subtitle }}</p>
        {% endif %}
      </div>

      <a href="{% url 'projects_hub' %}"
         class="mt-4 inline-flex items-center gap-2 rounded-lg border border-slate-300 bg-white px-4 py-2 text-sm font-semibold text-slate-900 hover:bg-slate-50 sm:mt-0">
        Retour à Mes projets
        <span aria-hidden="true">→</span>
      </a>
    </div>

    <!-- Grid (style "services") -->
    <div class="mt-10 grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3">
      {% for p in projects %}
        <a href="{% url 'project_detail' p.id %}"
           class="group rounded-2xl border bg-white p-6 shadow-sm transition hover:-translate-y-1 hover:shadow-md">

          <!-- image slot -->
          <div class="w-full rounded-xl bg-slate-50 overflow-hidden aspect-[16/9] flex items-center justify-center">
            {% if p.image %}
              <img
                src="{% static 'images/tech/' %}{{ p.image.name|cut:'projects/' }}"
                alt="{{ p.title }}"
                class="h-full w-full object-contain p-2"
                loading="lazy"
              >
            {% else %}
              <div class="text-xs text-slate-400">Aperçu indisponible</div>
            {% endif %}
          </div>

          <h2 class="mt-4 text-base font-bold text-slate-900 text-center leading-snug min-h-[2.75rem]">
            {{ p.title }}
          </h2>

          <p class="mt-2 text-sm text-slate-700 text-center leading-relaxed">
            {{ p.description|default:"" | truncatewords:14 }}
          </p>

          {% if p.technologies %}
            <p class="mt-4 text-xs text-slate-500 text-center">
              <span class="font-semibold text-slate-700">Technologies :</span> {{ p.technologies }}
            </p>
          {% endif %}

          <div class="mt-5 flex justify-center">
            <span class="inline-flex items-center gap-2 text-sm font-semibold text-emerald-700">
              Voir le projet <span aria-hidden="true">→</span>
            </span>
          </div>

        </a>
      {% empty %}
        <div class="col-span-full rounded-2xl border bg-white p-6 text-sm text-slate-700">
          Aucun projet dans cette rubrique pour le moment.
        </div>
      {% endfor %}
    </div>

  </div>
</section>
{% endblock %}
